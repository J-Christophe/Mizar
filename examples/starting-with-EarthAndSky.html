<html>

<head>
    <title>Getting started with navigation</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" href="css/test.css">

    <!-- mode dev -->
    <script type="text/javascript" data-main="../src/rconfig.js" src="../node_modules/requirejs/require.js"></script>

    <!-- mode prod -->
    <!--<script type="text/javascript" src="../Mizar.min.js"></script>-->

    <script type="text/javascript">

        //function start() {
        require(['Mizar'], function (Mizar) {
            // Create Mizar instance
            var mizar = new Mizar({
                canvas: "MizarCanvas",
                configuration : {
                    positionTracker: {
                        position: "bottom"
                    }
                },
                planetContext: {
                    coordinateSystem: {geoideName: Mizar.CRS.WGS84}
                },
                skyContext : {
                    coordinateSystem: {geoideName: Mizar.CRS.Equatorial}
                }
            });

            mizar.setActivatedContext("Sky");
            mizar.addLayer({
                type: Mizar.LAYER.Hips,
                baseUrl: "http://alasky.unistra.fr/DSS/DSSColor"
            }, function(layerID){
                mizar.setBackgroundLayerByID(layerID);
                mizar.disable();
            });

            mizar.setActivatedContext("Planet");
            mizar.addLayer({
                "name": "Blue Marble",
                "type": "WMS",
                "baseUrl": "http://80.158.6.138/mapserv?map=WMS_BLUEMARBLE",
                "visible": true,
                "background": true
            });
            // subscribe to baseLayersReady to show the context andn the animation.
            mizar.getActivatedContext().subscribe("baseLayersReady", function() {
                // Planet layers are ready, we can show the sky background
                mizar.getSkyContext().enable();
                // init the navigation
                var nav = mizar.getActivatedContext().getNavigation();
                nav.zoomTo([0, 0], {fov: nav.getFov()});
            });
        });
    </script>
</head>

<body style="margin: 0; padding: 0;">
<!--<body style="margin: 0; padding: 0;" onload="start()">-->

<canvas id="MizarCanvas" style="border: none; margin: 0; padding: 0;">
</canvas>

</body>
</html>