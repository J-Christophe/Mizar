<html>

<head>
    <title>Mizar example : test earth</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" href="css/style.css">

    <script type="text/javascript" data-main="../src/rconfig.js" src="../node_modules/requirejs/require.js"></script>

    <script type="text/javascript">

        require(['Mizar'],
                function (Mizar) {


                    div = "MizarCanvas";
                    mizarDiv = (typeof div === "string") ? document.getElementById(div) : div;
                    
                    var context = {
                        "init": {
                            "category": "Planets",
                            "type": "Planet",
                            "name": "Earth",
                            "coordinateSystem": {
                                "geoideName": "EPSG:4326"
                            },
                            "visible": false
                        },
                        "layers": [
                            {
                                "type": "WCSElevation",
                                "name": "Elevation",
                                "baseUrl": "http://demonstrator.telespazio.com/wcspub",
                                "coverage": "GTOPO",
                                "version": "1.0.0",
                                "minElevation": -32000,
                                "scale": 2
                            },
                            {
                                "name": "Blue Marble",
                                "type": "WMS",
                                "baseUrl": "http://demonstrator.telespazio.com/wmspub",
                                "layers": "BlueMarble",
                                "visible": true,
                                "background": true
                            },
                            {
                                "category": "Other",
                                "type": "Atmosphere",
                                "exposure": 1.4,
                                "wavelength": [
                                    0.56,
                                    0.66,
                                    0.78
                                ],
                                "name": "Atmosphere",
                                "lightDir": [
                                    0,
                                    1,
                                    0
                                ],
                                "visible": false
                            },
                            {
                                "category": "Other",
                                "type": "TileWireframe",
                                "name": "Coordinates Grid",
                                "outline": true,
                                "visible": true
                            }
                        ]
                    };

                    var mizar =  new Mizar({
                        canvas: $(mizarDiv)[0],
                        configuration: {
                            "mizarBaseUrl":"localhost/Mizar/examples",
                            "debug":false,
                            "isMobile":false,
                            "positionTracker":true,
                            "elevationTracker":true,
                            "registry":false,
                            "proxyUse":false,
                            "proxyUrl":""
                        }
                    });
                    // Context creation : PLANET
                    mizar.createContext(Mizar.CONTEXT.Planet, context.init);
                    mizar.setActivatedContext(Mizar.CONTEXT.Planet);
                    
                    // Layers load
                    for (var i = 0; i < context.layers.length; i++) {
                        var layer = context.layers[i];
                        console.log("Load Layer "+layer.type+" : "+layer.name);
                        var layerID = mizar.addLayer(layer);
                        if(layer.type === Mizar.LAYER.WCSElevation) {
                            mizar.setBaseElevation(layer.name);
                        }
                    }

                    mizar.createStats({element: 'fps', verbose: false});

                    console.log("mizar",mizar);

        });


    </script>

</head>

<body style="background-color: white;">


<div id="webGLNotAvailable">
    If you see this message, WebGL is not supported in your browser.<br/>
    Please install a recent version of <a href="http://www.mozilla.com">Firefox</a> or <a
        href="http://www.google.com/chrome">Google Chrome</a>.<br/>
    If you already have a recent version of Firefox or Google Chrome, your graphics driver are too old, please update
    it.<br/>
    On Google Chrome, you can check why it is not working by entering "about:gpu" in the url bar.
</div>

<div id="webGLContextLost">
    If you see this message, WebGL context was lost.<br/>
    Please re-launch your browser. We are working on restoring without relaunching.
</div>

<div id="splash">
    <h1>Welcome to Mizar</h1>
    <div id="loadingSplash"></div>
    <div id="splash-logo"></div>
</div>
<div id="loading"></div>

<div class="canvas">

    <!-- Side bar will contain available layers -->
    <div id="categoryDiv">
    </div>

    <div class="" id="rightTopPopup"></div>

    <div class="" id="popupElevation">
    </div>

    <a href="#" id="elevationTrackingBtn" style="position:absolute; display:none;" class="elevationTrackingPopup"></a>

    <div class="noSelect" id="distanceDiv"></div>
    <div class="noSelect" id="navigationDiv">
        <div id="searchDiv">
        </div>

        <div id="compassDiv">
        </div>

        <div id="imageViewerDiv">
        </div>
    </div>


    <!-- Left-Bottom-section -->
    <div class="noSelect" id="leftBottomDiv">
        <!-- Div for relative position 164 = define height of mollweideContent-->
        <div id="2dMapContainer" style="display: none; position: relative; height: 164px; margin-bottom: 5px;">
            <div id="mollweideDiv">
				<span id="mollweideContent">
					<canvas id="mollweideCanvas" class="noSelect" width="232px" height="116px"></canvas>
					<div id="fov" class="ui-widget">Fov : 45 x 45</div>
				</span>

                <span id="slideArrow"></span>
            </div>
        </div>
        <div id="shareContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="share"/>

            <div id="shareResult" style="pointer-events : auto;">
                <input type="text" id="shareInput"/>
                <input type="button" id="shareClear"/>
            </div>
        </div>
        <div id="sampContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="sampInvoker"/>
        </div>
        <div id="measureSkyContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="measureSkyInvoker"/>
        </div>
        <div id="measurePlanetContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="measurePlanetInvoker"/>
        </div>
        <div id="switch2DContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="switch2DButton"/>
        </div>
        <div id="exportContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="exportInvoker"/>
        </div>
        <div id="searchContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="searchInvoker"/>
        </div>
        <div id="warningContainer" style="display: none;" class="leftBottomButton">
            <input type="button" id="warningButton"/>
        </div>
        <div style="display: none;" id="fps" class="statBox ui-widget">FPS : 0</div>
    </div>

    <div id="attributions">
        <div class="noSelect" id="skyAttributions"></div>
        <div class="noSelect" id="globeAttributions"></div>
    </div>
    <div id="resultNavigation"></div>
    <div id="tracker">
        <div id="posTrackerInfo" class="noSelect"></div>
        <div id="posTracker" class="noSelect"></div>
        <div id="elevTracker" class="noSelect"></div>
    </div>

    <canvas class="noSelect" id="MizarCanvas" style="border: none; margin: 0; padding: 0">
    </canvas>

</div>

</body>

</html>
